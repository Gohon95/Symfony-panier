{% extends 'base.html.twig' %}

{% block title %}
	{{'panier.titre'|trans}}
{% endblock %}

{% block body %}
	<style></style>

	<div class="">

		<h1>{{'panier.titre'|trans}}</h1>
		{% if panier is not empty %}
		
			{% set state = 0 %}
			{# Somme d'un produit * quantité #}
			{% set Prix_Total_Quantite = 0 %}
			{# Prix de tous les articles commandés #}
			{% set Prix_Total = 0 %}

			<table class="table">
				<thead>
					<tr>
						<th>{{'produit.nom'|trans}}</th>
						<th>{{'produit.Quantite'|trans}}</th>
						<th>{{'produit.Prix'|trans}}</th>
						<th>{{'panier.Montant'|trans}}</th>

					</tr>
				</thead>
				<tbody>
					{% for produit in panier %}
						{% set state = produit.etat %}

						<tr>
							<td>
								<a href="{{ path('un_produit', {'id':produit.id}) }}">{{ produit.produit.nom }}</a>
							</td>
							<td>{{ produit.Quantite }}</td>
							<td>{{ produit.produit.Prix }}€</td>

							<td>
								{% set Prix_Total_Quantite = produit.Quantite * produit.produit.Prix %}
								{{ Prix_Total_Quantite}}€</td>
							<td>
								<a type="button" class="btn btn-danger" href="{{path('delete_produit_from_panier',{'id':produit.id})}}">{{'panier.Supprimer'|trans({'nom':produit.produit.nom})}}</a>
							</td>
							{% set Prix_Total = Prix_Total + Prix_Total_Quantite %}
						</tr>
					</p>
				</tbody>
			{% endfor %}

			<td>{{'panier.Total'|trans}}

				{{ Prix_Total}}€</td>
			{% if state == 0 %}
				<td>
					<a type="button" class="btn btn-success" href="{{path('panier_acheter')}}">{{'panier.acheter'|trans}}</a>
				</td>
			{% elseif state == 1 %}
				<td>
					<a type="button" class="btn btn-secondary disabled" href="{{path('panier_acheter')}}">{{'panier.dejaacheter'|trans}}</a>
				</td>
			{% endif %}
		</table>
	{% else %}
		<p>{{'panier.noproduit'|trans}}
		{% endif %}
	</div>
{% endblock %}
